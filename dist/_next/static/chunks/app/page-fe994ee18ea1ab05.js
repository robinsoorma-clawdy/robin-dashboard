(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6175:function(e,t,r){Promise.resolve().then(r.bind(r,2336))},2336:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(7437),o=r(2265);let n=(0,r(3053).eI)("https://jfsgojrkphwydazkwuxk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmc2dvanJrcGh3eWRhemt3dXhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NTk0MjIsImV4cCI6MjA4NjIzNTQyMn0.RUfVvccAJt775XJimfbIGais6yp7PgXVioxM8NP7qks"),i=[];async function s(e){let{type:t,task_id:r,task_title:a,from_status:o,to_status:n,details:s,created_by:l="robin"}=e;i.unshift({id:crypto.randomUUID(),type:t,task_id:r,task_title:a,from_status:o||null,to_status:n||null,details:s||null,created_by:l,created_at:new Date().toISOString()}),i.length>100&&i.pop()}async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return i.slice(0,e)}function d(e){let{title:t,status:r,tasks:i,count:l,onTaskAdded:d,onTaskClick:c,onDragStart:p,onDragEnd:x,onDragOver:u,onDrop:g,onMoveTask:y,isDragOver:v,draggedTask:h}=e,[m,b]=(0,o.useState)(!1),[f,j]=(0,o.useState)(""),[k,S]=(0,o.useState)(""),[C,D]=(0,o.useState)(""),[w,_]=(0,o.useState)("work"),[z,T]=(0,o.useState)("medium"),[R,W]=(0,o.useState)(null),[I,E]=(0,o.useState)(""),[B,A]=(0,o.useState)(""),[M,L]=(0,o.useState)("work"),[F,N]=(0,o.useState)("medium"),[O,P]=(0,o.useState)(""),[H,U]=(0,o.useState)("todo"),[q,$]=(0,o.useState)(!1),[G,K]=(0,o.useState)(""),[X,J]=(0,o.useState)(null),[V,Y]=(0,o.useState)(null),[Q,Z]=(0,o.useState)(null),ee=(0,o.useRef)(null),et=(0,o.useRef)(!1);(0,o.useEffect)(()=>{if(!R)return;let e=e=>{ee.current&&!ee.current.contains(e.target)&&ei()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[R]);let er=(0,o.useCallback)(e=>{"Escape"===e.key?(e.preventDefault(),ei()):"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&R&&(e.preventDefault(),ec(R))},[R,I,B,M,F,O,H]),ea=async e=>{if(e.preventDefault(),!f.trim())return;let{data:t,error:a}=await n.from("tasks").insert([{title:f,description:k,status:r,category:w,priority:z,due_date:C||null,created_by:"robin"}]).select();if(a)console.error("Error adding task:",a);else{let e=null==t?void 0:t[0];await s({type:"task_created",task_id:(null==e?void 0:e.id)||null,task_title:f,to_status:r}),j(""),S(""),D(""),b(!1),d()}},eo=async(e,t,a)=>{if(a.stopPropagation(),!confirm("Delete this task?"))return;let{error:o}=await n.from("tasks").delete().eq("id",e);o?console.error("Error deleting task:",o):(await s({type:"task_deleted",task_id:e,task_title:t,from_status:r}),d())},en=(e,t)=>{t.stopPropagation(),W(e.id),E(e.title),A(e.description||""),L(e.category),N(e.priority||"medium"),P(e.due_date||""),U(e.status),K("")},ei=()=>{W(null),E(""),A(""),L("work"),N("medium"),P(""),U("todo"),$(!1),K("")},es=(e,t)=>{J(e.touches[0].clientX),Y(e.touches[0].clientX),Z(t)},el=e=>{null!==X&&Y(e.touches[0].clientX)},ed=e=>{if(null!==X&&null!==V){let t=V-X;Math.abs(t)>100&&(t>100?"todo"===r?y(e,"in_progress"):"in_progress"===r&&y(e,"done"):"done"===r?y(e,"in_progress"):"in_progress"===r&&y(e,"todo"))}J(null),Y(null),Z(null)},ec=async e=>{let t=I.trim();if(!t){K("Task title is required");return}$(!0),K("");let r=i.find(t=>t.id===e),a=null==r?void 0:r.status,{error:o}=await n.from("tasks").update({title:t,description:B,category:M,priority:F,due_date:O||null,status:H,updated_at:new Date().toISOString()}).eq("id",e);o?(console.error("Error updating task:",o),K("Failed to save changes. Please try again."),$(!1)):(a&&a!==H?await s({type:"done"===H?"task_completed":"task_moved",task_id:e,task_title:t,from_status:a,to_status:H}):r&&(r.title!==t||r.description!==B||r.priority!==F||r.category!==M||r.due_date!==(O||null))&&await s({type:"task_updated",task_id:e,task_title:t,details:"Updated task details"}),ei(),d())},ep=e=>{switch(e){case"high":return"var(--danger)";case"medium":return"var(--warning)";case"low":return"var(--success)";default:return"var(--text-muted)"}},ex={work:"#58a6ff",project:"#a371f7",career:"#3fb950",finance:"#d29922",personal:"#8b949e"};return(0,a.jsxs)("div",{onDragOver:e=>u(e,r),onDrop:e=>g(e,r),style:{backgroundColor:v?"var(--accent-subtle)":"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"20px",border:"2px solid ".concat(v?"var(--accent)":"var(--border)"),transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column"},children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid var(--border-subtle)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,a.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:(()=>{switch(r){case"todo":default:return"var(--text-secondary)";case"in_progress":return"var(--accent)";case"done":return"var(--success)"}})()}}),(0,a.jsx)("h3",{style:{fontSize:"14px",fontWeight:600,color:"var(--text-primary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:t}),(0,a.jsx)("span",{style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,minWidth:"24px",textAlign:"center"},children:l})]})}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1,marginBottom:"16px"},children:[0===i.length&&!m&&(0,a.jsx)("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-muted)",fontSize:"14px",border:"2px dashed var(--border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--bg-tertiary)"},children:v?"Drop here":"No tasks"}),i.map(e=>{let t=Q===e.id&&null!==X&&null!==V?V-X:0;return(0,a.jsx)("div",{children:R===e.id?(0,a.jsxs)("div",{ref:ee,onKeyDown:er,className:"animate-slide-in",style:{backgroundColor:"var(--bg-tertiary)",padding:"16px",borderRadius:"var(--radius-md)",border:"2px solid var(--accent)",display:"flex",flexDirection:"column",gap:"12px",animation:"slideIn 0.2s ease-out",opacity:q?.7:1,pointerEvents:q?"none":"auto",transition:"opacity 0.2s"},children:[G&&(0,a.jsx)("div",{style:{padding:"8px 12px",backgroundColor:"rgba(248, 81, 73, 0.1)",border:"1px solid var(--danger)",borderRadius:"var(--radius-sm)",color:"var(--danger)",fontSize:"13px",fontWeight:500},children:G}),(0,a.jsx)("input",{type:"text",value:I,onChange:e=>{E(e.target.value),G&&K("")},placeholder:"Task title",style:{width:"100%",padding:"10px 14px",backgroundColor:"var(--bg-secondary)",border:"1px solid ".concat(G&&!I.trim()?"var(--danger)":"var(--border)"),borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",fontWeight:500},autoFocus:!0}),(0,a.jsx)("textarea",{value:B,onChange:e=>A(e.target.value),placeholder:"Description (optional)",rows:2,style:{width:"100%",padding:"10px 14px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",resize:"none",fontFamily:"inherit"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("select",{value:M,onChange:e=>L(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"work",children:"\uD83D\uDCBC Work"}),(0,a.jsx)("option",{value:"project",children:"\uD83D\uDE80 Project"}),(0,a.jsx)("option",{value:"career",children:"\uD83D\uDCC8 Career"}),(0,a.jsx)("option",{value:"finance",children:"\uD83D\uDCB0 Finance"}),(0,a.jsx)("option",{value:"personal",children:"\uD83C\uDFE0 Personal"})]}),(0,a.jsxs)("select",{value:F,onChange:e=>N(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"low",children:"\uD83D\uDFE2 Low"}),(0,a.jsx)("option",{value:"medium",children:"\uD83D\uDFE1 Medium"}),(0,a.jsx)("option",{value:"high",children:"\uD83D\uDD34 High"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("label",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:O,onChange:e=>P(e.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer",colorScheme:"dark"}})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("label",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),(0,a.jsxs)("select",{value:H,onChange:e=>U(e.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"todo",children:"\uD83D\uDCCB To Do"}),(0,a.jsx)("option",{value:"in_progress",children:"\uD83D\uDD04 In Progress"}),(0,a.jsx)("option",{value:"done",children:"✅ Done"})]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[(0,a.jsxs)("button",{type:"button",onClick:()=>ec(e.id),disabled:q,style:{flex:1,backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",padding:"10px",fontSize:"14px",fontWeight:600,cursor:q?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:e=>{q||(e.currentTarget.style.backgroundColor="var(--accent-hover)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--accent)"},children:[q&&(0,a.jsx)("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"#fff",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),q?"Saving...":"Save"]}),(0,a.jsx)("button",{type:"button",onClick:ei,disabled:q,style:{flex:1,backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"10px",fontSize:"14px",fontWeight:500,cursor:q?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:e=>{q||(e.currentTarget.style.backgroundColor="var(--bg-tertiary)",e.currentTarget.style.color="var(--text-primary)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--bg-secondary)",e.currentTarget.style.color="var(--text-secondary)"},children:"Cancel"})]}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"var(--text-muted)",textAlign:"center",marginTop:"-4px"},children:"Esc to cancel \xb7 ⌘/Ctrl+Enter to save"})]}):(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>{et.current=!0,p(e)},onDragEnd:()=>{x(),setTimeout(()=>{et.current=!1},0)},onClick:()=>{et.current||c(e)},onTouchStart:t=>es(t,e.id),onTouchMove:el,onTouchEnd:()=>ed(e),className:"task-card animate-slide-in",style:{backgroundColor:"var(--bg-tertiary)",padding:"16px",borderRadius:"var(--radius-md)",border:"1px solid var(--border-subtle)",cursor:"grab",transition:Q===e.id?"none":"all 0.2s ease",boxShadow:(null==h?void 0:h.id)===e.id?"var(--shadow-lg)":"var(--shadow-sm)",opacity:(null==h?void 0:h.id)===e.id?.5:1,position:"relative",transform:"translateX(".concat(t,"px)"),zIndex:Q===e.id?10:1},children:[(0,a.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"2px",opacity:.3},children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"var(--text-muted)"}},t))}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:"#fff",backgroundColor:ex[e.category]||"#6e7681"},children:e.category}),(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:ep(e.priority||"medium"),backgroundColor:"".concat(ep(e.priority||"medium"),"20")},children:e.priority||"medium"})]}),(0,a.jsx)("p",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:500,lineHeight:1.5,marginBottom:e.description?"8px":"0",paddingRight:"24px"},children:e.title}),e.description&&(0,a.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:1.5,marginBottom:"12px"},children:e.description}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--accent-subtle)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",color:"var(--accent)",fontWeight:600},children:"R"}),e.due_date&&(()=>{let t=new Date,r=new Date(e.due_date),o=r<t,n=!o&&r.getTime()-t.getTime()<864e5;return(0,a.jsxs)("span",{style:{fontSize:"12px",color:o?"var(--danger)":n?"var(--warning)":"var(--text-muted)",fontWeight:o||n?600:400},children:["\uD83D\uDCC5 ",new Date(e.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})()]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,a.jsx)("button",{onClick:t=>en(e,t),style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--text-muted)",transition:"all 0.2s",fontSize:"14px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--accent)",e.currentTarget.style.backgroundColor="var(--accent-subtle)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:"✏️"}),(0,a.jsx)("button",{onClick:t=>eo(e.id,e.title,t),style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--text-muted)",transition:"all 0.2s",fontSize:"14px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--danger)",e.currentTarget.style.backgroundColor="var(--danger-subtle)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:"\uD83D\uDDD1️"})]})]})]})},e.id)})]}),"done"!==r&&(0,a.jsx)(a.Fragment,{children:m?(0,a.jsxs)("form",{onSubmit:ea,style:{display:"flex",flexDirection:"column",gap:"12px",animation:"slideIn 0.2s ease-out"},children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"What needs to be done?",style:{width:"100%",padding:"12px 16px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",transition:"border-color 0.2s"},autoFocus:!0}),(0,a.jsx)("textarea",{value:k,onChange:e=>S(e.target.value),placeholder:"Add details (optional)...",rows:2,style:{width:"100%",padding:"12px 16px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",resize:"none",fontFamily:"inherit"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("select",{value:w,onChange:e=>_(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"work",children:"\uD83D\uDCBC Work"}),(0,a.jsx)("option",{value:"project",children:"\uD83D\uDE80 Project"}),(0,a.jsx)("option",{value:"career",children:"\uD83D\uDCC8 Career"}),(0,a.jsx)("option",{value:"finance",children:"\uD83D\uDCB0 Finance"}),(0,a.jsx)("option",{value:"personal",children:"\uD83C\uDFE0 Personal"})]}),(0,a.jsxs)("select",{value:z,onChange:e=>T(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"low",children:"\uD83D\uDFE2 Low"}),(0,a.jsx)("option",{value:"medium",children:"\uD83D\uDFE1 Medium"}),(0,a.jsx)("option",{value:"high",children:"\uD83D\uDD34 High"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("label",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Due Date (Optional)"}),(0,a.jsx)("input",{type:"date",value:C,onChange:e=>D(e.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer",colorScheme:"dark"}})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[(0,a.jsx)("button",{type:"submit",style:{flex:1,backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",padding:"12px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--accent-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--accent)"},children:"Add Task"}),(0,a.jsx)("button",{type:"button",onClick:()=>{b(!1),j(""),S(""),D("")},style:{flex:1,backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"12px",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-secondary)",e.currentTarget.style.color="var(--text-primary)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--bg-tertiary)",e.currentTarget.style.color="var(--text-secondary)"},children:"Cancel"})]})]}):(0,a.jsxs)("button",{onClick:()=>b(!0),style:{width:"100%",border:"2px dashed var(--border)",borderRadius:"var(--radius-md)",padding:"14px",color:"var(--text-muted)",backgroundColor:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--accent)",e.currentTarget.style.color="var(--accent)",e.currentTarget.style.backgroundColor="var(--accent-subtle)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("span",{style:{fontSize:"18px"},children:"+"}),"Add a task"]})})]})}function c(){let e=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("header",{style:{backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border)",padding:"32px 16px"},children:(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",backgroundColor:"var(--accent-subtle)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{style:{fontSize:"clamp(24px, 5vw, 32px)",fontWeight:700,background:"linear-gradient(135deg, var(--accent), #a371f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.5px"},children:"Robin's Mission Control"})})]}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"15px",marginBottom:"8px"},children:"Track tasks, projects, and daily activities"}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"13px",fontWeight:500},children:e})]})})}function p(e){let{task:t,onClose:r}=e,[i,s]=(0,o.useState)("comments"),[l,d]=(0,o.useState)([]),[c,p]=(0,o.useState)([]),[x,u]=(0,o.useState)(""),[g,y]=(0,o.useState)(!1),[v,h]=(0,o.useState)(!0),[m,b]=(0,o.useState)(!1),f=(0,o.useRef)(null),j=(0,o.useRef)(null),k=(0,o.useRef)(null),S=(0,o.useCallback)(async()=>{let{data:e,error:r}=await n.from("task_comments").select("*").eq("task_id",t.id).order("created_at",{ascending:!0});r?console.error("Error fetching comments:",r):d(e||[]),h(!1)},[t.id]),C=(0,o.useCallback)(async()=>{b(!0);let{data:e,error:r}=await n.from("activity_logs").select("*").eq("task_id",t.id).order("created_at",{ascending:!1}).limit(50);r?console.error("Error fetching task activities:",r):p(e||[]),b(!1)},[t.id]);(0,o.useEffect)(()=>{S();let e=n.channel("task_comments_".concat(t.id)).on("postgres_changes",{event:"*",schema:"public",table:"task_comments",filter:"task_id=eq.".concat(t.id)},()=>{S()}).subscribe(),r=n.channel("task_activities_".concat(t.id)).on("postgres_changes",{event:"*",schema:"public",table:"activity_logs",filter:"task_id=eq.".concat(t.id)},()=>{C()}).subscribe();return()=>{e.unsubscribe(),r.unsubscribe()}},[t.id,S,C,i]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),(0,o.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),(0,o.useEffect)(()=>{k.current&&"comments"===i&&k.current.scrollIntoView({behavior:"smooth"})},[l.length,i]);let D=async e=>{var r;e.preventDefault();let a=x.trim();if(!a)return;y(!0);let{error:o}=await n.from("task_comments").insert([{task_id:t.id,content:a,created_by:"robin"}]);o?console.error("Error adding comment:",o):(u(""),S()),y(!1),null===(r=j.current)||void 0===r||r.focus()},w=e=>{switch(e){case"high":return"var(--danger)";case"medium":return"var(--warning)";case"low":return"var(--success)";default:return"var(--text-muted)"}},_=e=>{switch(e){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return e}},z=e=>{switch(e){case"todo":default:return"var(--text-secondary)";case"in_progress":return"var(--accent)";case"done":return"var(--success)"}},T=e=>{let t=new Date,r=new Date(e),a=Math.floor((t.getTime()-r.getTime())/1e3);if(a<60)return"just now";let o=Math.floor(a/60);if(o<60)return"".concat(o,"m ago");let n=Math.floor(o/60);if(n<24)return"".concat(n,"h ago");let i=Math.floor(n/24);return i<7?"".concat(i,"d ago"):r.toLocaleDateString("en-US",{month:"short",day:"numeric"})},R=e=>{switch(e){case"task_created":return"✨";case"task_moved":return"➡️";case"task_completed":return"✅";case"task_deleted":return"\uD83D\uDDD1️";case"task_updated":return"✏️";default:return"\uD83D\uDCCC"}},W=e=>{switch(e){case"task_created":return"Created";case"task_moved":return"Moved";case"task_completed":return"Completed";case"task_deleted":return"Deleted";case"task_updated":return"Updated";default:return e}},I=e=>{switch(e){case"task_created":return"var(--accent)";case"task_moved":return"var(--warning)";case"task_completed":return"var(--success)";case"task_deleted":return"var(--danger)";case"task_updated":return"var(--text-secondary)";default:return"var(--text-muted)"}};return(0,a.jsx)("div",{ref:f,onClick:e=>{e.target===f.current&&r()},className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"24px"},children:(0,a.jsxs)("div",{className:"modal-content",style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",border:"1px solid var(--border)",width:"100%",maxWidth:"680px",maxHeight:"calc(100vh - 48px)",display:"flex",flexDirection:"column",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.5)",overflow:"hidden"},children:[(0,a.jsxs)("div",{style:{padding:"20px 24px 16px",borderBottom:"1px solid var(--border-subtle)",flexShrink:0},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"16px"},children:[(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"12px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:"#fff",backgroundColor:{work:"#58a6ff",project:"#a371f7",career:"#3fb950",finance:"#d29922",personal:"#8b949e"}[t.category]||"#6e7681"},children:t.category}),(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:w(t.priority||"medium"),backgroundColor:"".concat(w(t.priority||"medium"),"20")},children:t.priority||"medium"}),(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:z(t.status),backgroundColor:"".concat(z(t.status),"15")},children:_(t.status)})]}),(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text-primary)",margin:0,lineHeight:1.4},children:t.title})]}),(0,a.jsx)("button",{onClick:r,style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--text-muted)",fontSize:"18px",lineHeight:1,transition:"all 0.2s",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.color="var(--text-primary)",e.currentTarget.style.backgroundColor="var(--bg-tertiary)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:"✕"})]}),t.description&&(0,a.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"14px",lineHeight:1.6,marginTop:"12px",marginBottom:0},children:t.description}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",marginTop:"12px",flexWrap:"wrap",fontSize:"13px",color:"var(--text-muted)"},children:[(0,a.jsxs)("span",{children:["Created ",new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),t.due_date&&(()=>{let e=new Date,r=new Date(t.due_date),o=r<e,n=!o&&r.getTime()-e.getTime()<864e5;return(0,a.jsxs)("span",{style:{color:o?"var(--danger)":n?"var(--warning)":"var(--text-muted)",fontWeight:o||n?600:400},children:["Due ",new Date(t.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})})(),(0,a.jsxs)("span",{children:["by ",t.created_by]})]})]}),(0,a.jsx)("div",{style:{display:"flex",gap:"0",borderBottom:"1px solid var(--border-subtle)",padding:"0 24px",flexShrink:0},children:[{id:"comments",label:"Comments",count:l.length},{id:"history",label:"History",count:c.length}].map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),style:{padding:"12px 16px",backgroundColor:"transparent",border:"none",borderBottom:"2px solid ".concat(i===e.id?"var(--accent)":"transparent"),cursor:"pointer",fontSize:"14px",fontWeight:i===e.id?600:400,color:i===e.id?"var(--text-primary)":"var(--text-muted)",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"6px"},children:[e.label,e.count>0&&(0,a.jsx)("span",{style:{backgroundColor:i===e.id?"var(--accent)":"var(--bg-tertiary)",color:i===e.id?"#fff":"var(--text-muted)",padding:"1px 7px",borderRadius:"10px",fontSize:"11px",fontWeight:600},children:e.count})]},e.id))}),(0,a.jsxs)("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:["comments"===i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"16px 24px",display:"flex",flexDirection:"column",gap:"12px"},children:[v?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-muted)"},children:[(0,a.jsx)("div",{style:{width:"24px",height:"24px",border:"2px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 8px"}}),"Loading comments..."]}):0===l.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)",fontSize:"14px"},children:[(0,a.jsx)("p",{style:{fontSize:"28px",marginBottom:"8px"},children:"\uD83D\uDCAC"}),(0,a.jsx)("p",{children:"No comments yet. Start the discussion!"})]}):l.map(e=>(0,a.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,a.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"var(--accent-subtle)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"var(--accent)",fontWeight:600,flexShrink:0,marginTop:"2px"},children:e.created_by.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-primary)"},children:e.created_by}),(0,a.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},title:new Date(e.created_at).toLocaleString(),children:T(e.created_at)})]}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"var(--text-secondary)",lineHeight:1.5,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"var(--bg-tertiary)",padding:"10px 14px",borderRadius:"0 var(--radius-md) var(--radius-md) var(--radius-md)",border:"1px solid var(--border-subtle)"},children:e.content})]})]},e.id)),(0,a.jsx)("div",{ref:k})]}),(0,a.jsx)("div",{style:{padding:"12px 24px 16px",borderTop:"1px solid var(--border-subtle)",flexShrink:0},children:(0,a.jsxs)("form",{onSubmit:D,style:{display:"flex",gap:"8px",alignItems:"flex-end"},children:[(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)("textarea",{ref:j,value:x,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),D(e))},placeholder:"Add a comment...",rows:2,style:{width:"100%",padding:"10px 14px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",resize:"none",fontFamily:"inherit",lineHeight:1.5,transition:"border-color 0.2s"},onFocus:e=>{e.currentTarget.style.borderColor="var(--accent)"},onBlur:e=>{e.currentTarget.style.borderColor="var(--border)"}}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"4px"},children:"Cmd/Ctrl+Enter to submit"})]}),(0,a.jsxs)("button",{type:"submit",disabled:g||!x.trim(),style:{padding:"10px 18px",backgroundColor:x.trim()?"var(--accent)":"var(--bg-tertiary)",color:x.trim()?"#fff":"var(--text-muted)",border:"none",borderRadius:"var(--radius-md)",fontSize:"14px",fontWeight:600,cursor:g||!x.trim()?"not-allowed":"pointer",transition:"all 0.2s",marginBottom:"20px",opacity:g?.7:1,display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{x.trim()&&!g&&(e.currentTarget.style.backgroundColor="var(--accent-hover)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=x.trim()?"var(--accent)":"var(--bg-tertiary)"},children:[g&&(0,a.jsx)("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"#fff",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),g?"Sending...":"Send"]})]})})]}),"history"===i&&(0,a.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"16px 24px"},children:m?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-muted)"},children:[(0,a.jsx)("div",{style:{width:"24px",height:"24px",border:"2px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 8px"}}),"Loading history..."]}):0===c.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)",fontSize:"14px"},children:[(0,a.jsx)("p",{style:{fontSize:"28px",marginBottom:"8px"},children:"\uD83D\uDCCB"}),(0,a.jsx)("p",{children:"No history for this task yet."})]}):(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0",position:"relative"},children:[(0,a.jsx)("div",{style:{position:"absolute",left:"15px",top:"20px",bottom:"20px",width:"2px",backgroundColor:"var(--border-subtle)"}}),c.map(e=>(0,a.jsxs)("div",{style:{display:"flex",gap:"12px",padding:"10px 0",alignItems:"flex-start",position:"relative"},children:[(0,a.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"".concat(I(e.type),"15"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:0,zIndex:1,border:"2px solid var(--bg-secondary)"},children:R(e.type)}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0,paddingTop:"4px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{fontSize:"13px",fontWeight:600,color:I(e.type)},children:W(e.type)}),(0,a.jsx)("span",{style:{fontSize:"12px",color:"var(--text-muted)"},title:new Date(e.created_at).toLocaleString(),children:T(e.created_at)})]}),e.from_status&&e.to_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:_(e.from_status)}),(0,a.jsx)("span",{children:"→"}),(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:_(e.to_status)})]}),"task_created"===e.type&&e.to_status&&!e.from_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px"},children:["Added to"," ",(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:_(e.to_status)})]}),e.details&&(0,a.jsx)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",fontStyle:"italic"},children:e.details}),(0,a.jsxs)("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px"},children:["by ",e.created_by]})]})]},e.id))]})})]})]})})}function x(e){let{tasks:t}=e,r=t.filter(e=>{var t;return e.title.toLowerCase().includes("house")||e.title.toLowerCase().includes("buying")||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes("house"))||"finance"===e.category}),o=Math.ceil(16),n=new Date;return n.setMonth(n.getMonth()+o),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)",boxShadow:"var(--shadow-md)"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,marginBottom:"20px",color:"var(--text-primary)"},children:"\uD83C\uDFE0 House Buying Progress"}),(0,a.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"14px"},children:[(0,a.jsxs)("span",{style:{color:"var(--text-secondary)"},children:["Current: ",(0,a.jsxs)("strong",{children:["$","40","k"]})]}),(0,a.jsxs)("span",{style:{color:"var(--text-secondary)"},children:["Target: ",(0,a.jsxs)("strong",{children:["$","80","k"]})]})]}),(0,a.jsxs)("div",{style:{height:"24px",backgroundColor:"var(--bg-tertiary)",borderRadius:"12px",position:"relative",overflow:"hidden",border:"1px solid var(--border)"},children:[(0,a.jsx)("div",{style:{width:"".concat(50,"%"),height:"100%",background:"linear-gradient(90deg, var(--accent), #a371f7)",borderRadius:"12px",transition:"width 1s ease-out"}}),(0,a.jsx)("div",{style:{position:"absolute",left:"".concat(50,"%"),top:0,width:"2px",height:"100%",backgroundColor:"var(--success)",zIndex:2},children:(0,a.jsx)("div",{style:{position:"absolute",top:"-20px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"var(--success)",fontWeight:700,whiteSpace:"nowrap"},children:"MIN GOAL (40k)"})})]}),(0,a.jsx)("p",{style:{marginTop:"12px",fontSize:"13px",color:"var(--text-muted)",textAlign:"center"},children:"\uD83C\uDF89 Minimum deposit milestone reached!"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"var(--text-primary)"},children:"\uD83D\uDCB0 Source Breakdown"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[{name:"Cash",amount:25e3,color:"var(--success)"},{name:"Super",amount:1e4,color:"var(--accent)"},{name:"Stocks",amount:5e3,color:"var(--warning)",note:"Not to be touched"}].map(e=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:e.color}}),(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px"},children:[(0,a.jsx)("span",{style:{fontSize:"14px",fontWeight:500},children:e.name}),(0,a.jsxs)("span",{style:{fontSize:"14px",fontWeight:600},children:["$",(e.amount/1e3).toFixed(1),"k"]})]}),e.note&&(0,a.jsxs)("span",{style:{fontSize:"11px",color:"var(--danger)",fontWeight:500},children:["⚠️ ",e.note]})]})]},e.name))})]}),(0,a.jsxs)("div",{style:{padding:"20px",backgroundColor:"var(--accent-subtle)",borderRadius:"var(--radius-lg)",border:"1px solid var(--accent)",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"},children:[(0,a.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"8px",color:"var(--text-primary)"},children:"\uD83D\uDCC5 Estimated Timeline"}),(0,a.jsxs)("p",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"16px"},children:["Based on ",(0,a.jsxs)("strong",{children:["$",2500,"/mo"]})," savings rate"]}),(0,a.jsxs)("div",{style:{fontSize:"24px",fontWeight:700,color:"var(--accent)",marginBottom:"4px"},children:[o," Months"]}),(0,a.jsxs)("p",{style:{fontSize:"14px",color:"var(--text-primary)",fontWeight:500},children:["Estimated Goal Date: ",n.toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text-primary)"},children:"\uD83C\uDFC1 Key Milestones"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{id:1,label:"Get pre-approval",completed:!0},{id:2,label:"Find a buyer agent",completed:!1},{id:3,label:"Attend 5+ inspections",completed:!0},{id:4,label:"Shortlist 3 suburbs",completed:!0},{id:5,label:"Submit first offer",completed:!1},{id:6,label:"Finalize mortgage",completed:!1}].map(e=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 0",borderBottom:"1px solid var(--border-subtle)",opacity:e.completed?.7:1},children:[(0,a.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"4px",border:"2px solid ".concat(e.completed?"var(--success)":"var(--border)"),backgroundColor:e.completed?"var(--success)":"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#fff"},children:e.completed&&"✓"}),(0,a.jsx)("span",{style:{fontSize:"14px",color:e.completed?"var(--text-muted)":"var(--text-primary)",textDecoration:e.completed?"line-through":"none"},children:e.label})]},e.id))})]}),(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"16px",color:"var(--text-primary)"},children:"\uD83D\uDD17 Contributing Tasks"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.length>0?r.map(e=>(0,a.jsxs)("div",{style:{padding:"12px",backgroundColor:"var(--bg-tertiary)",borderRadius:"var(--radius-md)",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"4px"},children:[(0,a.jsx)("span",{style:{fontSize:"14px",fontWeight:500,color:"var(--text-primary)"},children:e.title}),(0,a.jsx)("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"10px",backgroundColor:"done"===e.status?"var(--success-subtle)":"var(--accent-subtle)",color:"done"===e.status?"var(--success)":"var(--accent)",textTransform:"uppercase",fontWeight:700},children:e.status.replace("_"," ")})]}),(0,a.jsxs)("p",{style:{fontSize:"12px",color:"var(--text-muted)",margin:0},children:["Category: ",e.category]})]},e.id)):(0,a.jsx)("p",{style:{fontSize:"14px",color:"var(--text-muted)",textAlign:"center",padding:"20px"},children:"No active tasks linked to this goal yet."})})]})]})]})}var u=r(1436),g=r(6769),y=r(6940),v=r(7059),h=r(2994),m=r(9230),b=r(9682);let f=[{value:"salary",label:"Salary",color:"var(--accent)"},{value:"super",label:"Super",color:"#a371f7"},{value:"investments",label:"Investments",color:"var(--warning)"},{value:"cash",label:"Cash",color:"var(--success)"},{value:"crypto",label:"Crypto",color:"#f7931a"},{value:"property",label:"Property",color:"#f85149"},{value:"other",label:"Other",color:"var(--text-muted)"}];function j(){let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!0),[s,l]=(0,o.useState)(!1),[d,c]=(0,o.useState)(null),[p,x]=(0,o.useState)({date:new Date().toISOString().split("T")[0],category:"cash",amount:"",notes:""});(0,o.useEffect)(()=>{j();let e=n.channel("net_worth_entries").on("postgres_changes",{event:"*",schema:"public",table:"net_worth_entries"},j).subscribe();return()=>{e.unsubscribe()}},[]);let j=async()=>{let{data:e,error:r}=await n.from("net_worth_entries").select("*").order("date",{ascending:!0});r?console.error("Error fetching net worth entries:",r):t(e||[]),i(!1)},k=async()=>{l(!0);let e=new Date().toISOString().split("T")[0],{error:t}=await n.from("net_worth_entries").insert([{date:e,category:"salary",amount:8e4,notes:"Current annual salary",created_by:"robin"},{date:e,category:"super",amount:35e3,notes:"Superannuation balance",created_by:"robin"},{date:e,category:"investments",amount:15e3,notes:"Stock portfolio",created_by:"robin"},{date:e,category:"cash",amount:25e3,notes:"Savings accounts",created_by:"robin"},{date:e,category:"crypto",amount:5e3,notes:"Crypto holdings",created_by:"robin"}]);t?(console.error("Error seeding data:",t),alert("Error seeding data. Check console.")):j(),l(!1)},S=async e=>{if(e.preventDefault(),p.amount&&!s){if(l(!0),d){let{error:e}=await n.from("net_worth_entries").update({date:p.date,category:p.category,amount:parseFloat(p.amount),notes:p.notes}).eq("id",d);e?console.error("Error updating entry:",e):(c(null),x({...p,amount:"",notes:""}),j())}else{let{error:e}=await n.from("net_worth_entries").insert({date:p.date,category:p.category,amount:parseFloat(p.amount),notes:p.notes,created_by:"robin"});e?console.error("Error adding entry:",e):(x({...p,amount:"",notes:""}),j())}l(!1)}},C=e=>{c(e.id),x({date:e.date,category:e.category,amount:e.amount.toString(),notes:e.notes||""}),window.scrollTo({top:0,behavior:"smooth"})},D=async e=>{let{error:t}=await n.from("net_worth_entries").delete().eq("id",e);t?console.error("Error deleting entry:",t):j()},w=(0,o.useMemo)(()=>{let t={};return e.forEach(e=>{let r=e.date;t[r]||(t[r]={date:r,total:0},f.forEach(e=>{t[r][e.value]=0})),t[r][e.category]=(t[r][e.category]||0)+Number(e.amount)}),Object.keys(t).sort().map(e=>{let r=t[e],a=0;return f.forEach(e=>{a+=r[e.value]||0}),{...r,total:a}})},[e]),_=(0,o.useMemo)(()=>{let t={},r=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),a=new Set;r.forEach(e=>{a.has(e.category)||(t[e.category]=Number(e.amount),a.add(e.category))});let o=Object.values(t).reduce((e,t)=>e+t,0);return f.map(e=>({...e,amount:t[e.value]||0,percentage:o>0?(t[e.value]||0)/o*100:0})).filter(e=>e.amount>0||"cash"===e.value)},[e]),z=_.reduce((e,t)=>e+t.amount,0);return r?(0,a.jsx)("div",{style:{color:"var(--text-muted)",textAlign:"center",padding:"40px"},children:"Loading Net Worth data..."}):(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"24px"},children:[(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},children:[(0,a.jsx)("h3",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"1px"},children:"Current Net Worth"}),(0,a.jsxs)("div",{style:{fontSize:"48px",fontWeight:800,color:"var(--text-primary)",marginBottom:"4px"},children:["$",z.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})]}),(0,a.jsxs)("div",{style:{fontSize:"14px",color:"var(--success)",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[(0,a.jsx)("span",{children:"▲"}),(0,a.jsx)("span",{children:"Steady Growth"})]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)",height:"300px"},children:[(0,a.jsx)("h3",{style:{fontSize:"16px",fontWeight:600,marginBottom:"16px",color:"var(--text-primary)"},children:"Growth Over Time"}),(0,a.jsx)(u.h,{width:"100%",height:"80%",children:(0,a.jsxs)(g.T,{data:w,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"var(--accent)",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"var(--accent)",stopOpacity:0})]})}),(0,a.jsx)(y.q,{strokeDasharray:"3 3",stroke:"var(--border)",vertical:!1}),(0,a.jsx)(v.K,{dataKey:"date",stroke:"var(--text-muted)",fontSize:12,tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}),(0,a.jsx)(h.B,{stroke:"var(--text-muted)",fontSize:12,tickFormatter:e=>"$".concat(e/1e3,"k")}),(0,a.jsx)(m.u,{contentStyle:{backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)"},itemStyle:{color:"var(--accent)"},formatter:e=>void 0===e?["","Total Net Worth"]:["$".concat(e.toLocaleString()),"Total Net Worth"]}),(0,a.jsx)(b.uN,{type:"monotone",dataKey:"total",stroke:"var(--accent)",fillOpacity:1,fill:"url(#colorTotal)",strokeWidth:3})]})})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px"},children:[(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"20px",color:"var(--text-primary)"},children:"Category Breakdown"}),(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:_.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px",fontSize:"14px"},children:[(0,a.jsxs)("span",{style:{color:"var(--text-secondary)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:e.color}}),e.label]}),(0,a.jsxs)("span",{style:{color:"var(--text-primary)",fontWeight:600},children:["$",e.amount.toLocaleString()," (",e.percentage.toFixed(1),"%)"]})]}),(0,a.jsx)("div",{style:{height:"8px",backgroundColor:"var(--bg-tertiary)",borderRadius:"4px",overflow:"hidden"},children:(0,a.jsx)("div",{style:{width:"".concat(e.percentage,"%"),height:"100%",backgroundColor:e.color,borderRadius:"4px"}})})]},e.value))})]}),(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"20px",color:"var(--text-primary)"},children:"Add New Entry"}),0===e.length&&(0,a.jsx)("button",{onClick:k,disabled:s,style:{width:"100%",backgroundColor:"var(--bg-tertiary)",color:"var(--accent)",border:"1px dashed var(--accent)",borderRadius:"var(--radius-md)",padding:"12px",marginBottom:"16px",fontWeight:600,cursor:"pointer"},children:"\uD83C\uDF31 Initialize with Seed Data"}),(0,a.jsxs)("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("label",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Date"}),(0,a.jsx)("input",{type:"date",value:p.date,onChange:e=>x({...p,date:e.target.value}),required:!0,style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"8px 12px",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("label",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Category"}),(0,a.jsx)("select",{value:p.category,onChange:e=>x({...p,category:e.target.value}),style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"8px 12px",color:"var(--text-primary)",fontSize:"14px"},children:f.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("label",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Amount ($)"}),(0,a.jsx)("input",{type:"number",placeholder:"0.00",value:p.amount,onChange:e=>x({...p,amount:e.target.value}),required:!0,style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"8px 12px",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,a.jsx)("label",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Notes"}),(0,a.jsx)("input",{type:"text",placeholder:"Optional notes",value:p.notes,onChange:e=>x({...p,notes:e.target.value}),style:{backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"8px 12px",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,a.jsx)("button",{type:"submit",disabled:s,style:{backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",padding:"10px",fontWeight:600,cursor:s?"not-allowed":"pointer",opacity:s?.7:1,marginTop:"8px"},children:s?"Saving...":d?"Update Entry":"Add Entry"}),d&&(0,a.jsx)("button",{type:"button",onClick:()=>{c(null),x({...p,amount:"",notes:""})},style:{backgroundColor:"transparent",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"8px",fontSize:"13px",cursor:"pointer"},children:"Cancel Edit"})]})]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h3",{style:{fontSize:"18px",fontWeight:600,marginBottom:"20px",color:"var(--text-primary)"},children:"Recent Entries"}),(0,a.jsxs)("div",{style:{overflowX:"auto"},children:[(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,a.jsx)("th",{style:{textAlign:"left",padding:"12px",color:"var(--text-muted)",fontSize:"13px"},children:"Date"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"12px",color:"var(--text-muted)",fontSize:"13px"},children:"Category"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"12px",color:"var(--text-muted)",fontSize:"13px"},children:"Amount"}),(0,a.jsx)("th",{style:{textAlign:"left",padding:"12px",color:"var(--text-muted)",fontSize:"13px"},children:"Notes"}),(0,a.jsx)("th",{style:{textAlign:"right",padding:"12px",color:"var(--text-muted)",fontSize:"13px"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:[...e].reverse().slice(0,10).map(e=>{var t,r;return(0,a.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("td",{style:{padding:"12px",fontSize:"14px"},children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{style:{padding:"12px",fontSize:"14px"},children:(0,a.jsx)("span",{style:{padding:"2px 8px",borderRadius:"10px",backgroundColor:"".concat(null===(t=f.find(t=>t.value===e.category))||void 0===t?void 0:t.color,"20"),color:null===(r=f.find(t=>t.value===e.category))||void 0===r?void 0:r.color,fontSize:"12px",fontWeight:600,textTransform:"capitalize"},children:e.category})}),(0,a.jsxs)("td",{style:{padding:"12px",fontSize:"14px",fontWeight:600},children:["$",Number(e.amount).toLocaleString()]}),(0,a.jsx)("td",{style:{padding:"12px",fontSize:"14px",color:"var(--text-secondary)"},children:e.notes||"-"}),(0,a.jsx)("td",{style:{padding:"12px",textAlign:"right"},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,a.jsx)("button",{onClick:()=>C(e),style:{background:"none",border:"none",color:"var(--accent)",cursor:"pointer",fontSize:"13px"},children:"Edit"}),(0,a.jsx)("button",{onClick:()=>D(e.id),style:{background:"none",border:"none",color:"var(--danger)",cursor:"pointer",fontSize:"13px"},children:"Delete"})]})})]},e.id)})})]}),0===e.length&&(0,a.jsx)("div",{style:{textAlign:"center",padding:"32px",color:"var(--text-muted)"},children:"No entries found. Start by adding your first entry above."})]})]})]})}function k(){let[e,t]=(0,o.useState)([]),[r,i]=(0,o.useState)(!0),[u,g]=(0,o.useState)("tasks"),[y,v]=(0,o.useState)(null),[h,m]=(0,o.useState)(null),[b,f]=(0,o.useState)("all"),[k,S]=(0,o.useState)(""),[C,D]=(0,o.useState)(null),[w,_]=(0,o.useState)(""),[z,T]=(0,o.useState)(!1),[R,W]=(0,o.useState)(null),[I,E]=(0,o.useState)([]),[B,A]=(0,o.useState)(!1);(0,o.useEffect)(()=>{M(),L();let e=n.channel("tasks").on("postgres_changes",{event:"*",schema:"public",table:"tasks"},M).subscribe(),t=n.channel("tasks").on("postgres_changes",{event:"*",schema:"public",table:"tasks"},()=>{"activity"===u&&F()}).subscribe();return()=>{e.unsubscribe(),t.unsubscribe()}},[u]);let M=async()=>{let{data:e,error:r}=await n.from("tasks").select("*").order("created_at",{ascending:!1});r?console.error("Error fetching tasks:",r):t(e||[]),i(!1)},L=async()=>{let{data:e,error:t}=await n.from("notes").select("*").order("updated_at",{ascending:!1}).limit(1).single();t&&"PGRST116"!==t.code?console.error("Error fetching notes:",t):e&&(_(e.content||""),W(new Date(e.updated_at)))},F=async()=>{A(!0),E(await l(50)),A(!1)};(0,o.useEffect)(()=>{"activity"===u&&F()},[u]);let N=async()=>{T(!0);let{error:e}=await n.from("notes").upsert({content:w,updated_by:"clawdius",updated_at:new Date().toISOString()});e?console.error("Error saving notes:",e):W(new Date),T(!1)},O=(0,o.useCallback)(e=>{v(e)},[]),P=(0,o.useCallback)(()=>{v(null),m(null)},[]),H=(0,o.useCallback)((e,t)=>{e.preventDefault(),m(t)},[]),U=(0,o.useCallback)(async(e,t)=>{let r=e.status;if(r===t)return;let{error:a}=await n.from("tasks").update({status:t,updated_at:new Date().toISOString()}).eq("id",e.id);a?console.error("Error moving task:",a):(await s({type:"done"===t?"task_completed":"task_moved",task_id:e.id,task_title:e.title,from_status:r,to_status:t}),M())},[M]),q=(0,o.useCallback)(async(e,t)=>{e.preventDefault(),m(null),y&&(await U(y,t),v(null))},[y,U]),$=e.filter(e=>{let t="all"===b||e.category===b,r=e.title.toLowerCase().includes(k.toLowerCase());return t&&r}),G=$.filter(e=>"todo"===e.status),K=$.filter(e=>"in_progress"===e.status),X=$.filter(e=>"done"===e.status);if(r)return(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-primary)"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Loading..."})]})});let J=e=>({padding:"10px 20px",borderRadius:"var(--radius-md)",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s ease",backgroundColor:e?"var(--accent)":"transparent",color:e?"#fff":"var(--text-secondary)"});return(0,a.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-primary)"},children:[(0,a.jsx)(c,{}),(0,a.jsxs)("main",{style:{maxWidth:"1400px",margin:"0 auto",padding:"24px 16px"},children:[(0,a.jsx)("nav",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap",padding:"4px",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",width:"fit-content"},children:[{id:"tasks",label:"\uD83D\uDCCB Tasks"},{id:"goals",label:"\uD83C\uDFE0 Goals"},{id:"networth",label:"\uD83D\uDCC8 Net Worth"},{id:"activity",label:"\uD83D\uDCCA Activity"},{id:"memory",label:"\uD83E\uDDE0 Memory"},{id:"notes",label:"\uD83D\uDCDD Notes"}].map(e=>(0,a.jsx)("button",{onClick:()=>g(e.id),style:J(u===e.id),children:e.label},e.id))}),"tasks"===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{position:"relative",flex:"1 1 200px",maxWidth:"300px"},children:[(0,a.jsx)("input",{type:"text",placeholder:"Search tasks...",value:k,onChange:e=>S(e.target.value),style:{width:"100%",padding:"10px 16px 10px 40px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px"}}),(0,a.jsx)("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"},children:"\uD83D\uDD0D"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>f(e.target.value),style:{padding:"10px 16px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),(0,a.jsx)("option",{value:"work",children:"Work"}),(0,a.jsx)("option",{value:"project",children:"Project"}),(0,a.jsx)("option",{value:"career",children:"Career"}),(0,a.jsx)("option",{value:"finance",children:"Finance"}),(0,a.jsx)("option",{value:"personal",children:"Personal"})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px",alignItems:"start"},children:[(0,a.jsx)(d,{title:"To Do",status:"todo",tasks:G,count:G.length,onTaskAdded:M,onTaskClick:D,onDragStart:O,onDragEnd:P,onDragOver:H,onDrop:q,onMoveTask:U,isDragOver:"todo"===h,draggedTask:y}),(0,a.jsx)(d,{title:"In Progress",status:"in_progress",tasks:K,count:K.length,onTaskAdded:M,onTaskClick:D,onDragStart:O,onDragEnd:P,onDragOver:H,onDrop:q,onMoveTask:U,isDragOver:"in_progress"===h,draggedTask:y}),(0,a.jsx)(d,{title:"Done",status:"done",tasks:X,count:X.length,onTaskAdded:M,onTaskClick:D,onDragStart:O,onDragEnd:P,onDragOver:H,onDrop:q,onMoveTask:U,isDragOver:"done"===h,draggedTask:y})]})]}),"goals"===u&&(0,a.jsx)(x,{tasks:e}),"networth"===u&&(0,a.jsx)(j,{}),"notes"===u&&(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Quick Notes"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[z&&(0,a.jsx)("span",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"Saving..."}),R&&!z&&(0,a.jsxs)("span",{style:{color:"var(--text-muted)",fontSize:"13px"},children:["Saved ",R.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),(0,a.jsx)("button",{onClick:N,disabled:z,style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",fontSize:"14px",fontWeight:500,cursor:z?"not-allowed":"pointer",opacity:z?.7:1},children:"Save"})]})]}),(0,a.jsx)("textarea",{value:w,onChange:e=>_(e.target.value),onBlur:N,placeholder:"Type your notes here...",style:{width:"100%",minHeight:"400px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"16px",color:"var(--text-primary)",resize:"vertical",fontSize:"14px",lineHeight:1.6,fontFamily:"inherit"}}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"13px",marginTop:"12px",fontStyle:"italic"},children:"Notes are saved automatically when you click away or hit the Save button"})]}),"activity"===u&&(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"12px",borderBottom:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Recent Activity"}),(0,a.jsx)("button",{onClick:F,disabled:B,style:{padding:"8px 16px",backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"13px",fontWeight:500,cursor:B?"not-allowed":"pointer",opacity:B?.7:1,transition:"all 0.2s"},children:B?"Loading...":"Refresh"})]}),B&&0===I.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:[(0,a.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"}}),"Loading activity..."]}):0===I.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)",fontSize:"14px"},children:[(0,a.jsx)("p",{style:{fontSize:"32px",marginBottom:"12px"},children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{children:"No activity yet. Create, move, or delete tasks to see activity here."})]}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:I.map(e=>{let t=()=>{switch(e.type){case"task_created":return"var(--accent)";case"task_moved":return"var(--warning)";case"task_completed":return"var(--success)";case"task_deleted":return"var(--danger)";case"task_updated":return"var(--text-secondary)";default:return"var(--text-muted)"}},r=e=>{switch(e){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return e}};return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px 8px",borderRadius:"var(--radius-md)",transition:"background-color 0.15s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-tertiary)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"".concat(t(),"15"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:0,marginTop:"2px"},children:(()=>{switch(e.type){case"task_created":return"✨";case"task_moved":return"➡️";case"task_completed":return"✅";case"task_deleted":return"\uD83D\uDDD1️";case"task_updated":return"✏️";default:return"\uD83D\uDCCC"}})()}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:t(),padding:"2px 8px",borderRadius:"10px",backgroundColor:"".concat(t(),"15")},children:(()=>{switch(e.type){case"task_created":return"Created";case"task_moved":return"Moved";case"task_completed":return"Completed";case"task_deleted":return"Deleted";case"task_updated":return"Updated";default:return e.type}})()}),(0,a.jsx)("span",{style:{fontSize:"14px",fontWeight:500,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.task_title})]}),e.from_status&&e.to_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:r(e.from_status)}),(0,a.jsx)("span",{children:"→"}),(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:r(e.to_status)})]}),"task_created"===e.type&&e.to_status&&!e.from_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px"},children:["Added to"," ",(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:r(e.to_status)})]}),"task_deleted"===e.type&&e.from_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px"},children:["Removed from"," ",(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:r(e.from_status)})]}),e.details&&(0,a.jsx)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",fontStyle:"italic"},children:e.details})]}),(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--text-muted)",whiteSpace:"nowrap",flexShrink:0,marginTop:"2px"},title:new Date(e.created_at).toLocaleString(),children:(e=>{let t=new Date,r=new Date(e),a=Math.floor((t.getTime()-r.getTime())/1e3);if(a<60)return"just now";let o=Math.floor(a/60);if(o<60)return"".concat(o,"m ago");let n=Math.floor(o/60);if(n<24)return"".concat(n,"h ago");let i=Math.floor(n/24);return i<7?"".concat(i,"d ago"):r.toLocaleDateString("en-US",{month:"short",day:"numeric"})})(e.created_at)})]},e.id)})})]}),"memory"===u&&(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,marginBottom:"20px",color:"var(--text-primary)"},children:"Key Memories"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},children:[{icon:"\uD83D\uDCBC",title:"Work",items:["SWE at bank in Perth","Promotion incoming (Feb 2026)","$80k → ~$130k base"]},{icon:"\uD83C\uDFAF",title:"Goals",items:["Buy house late 2026","AWS certs (Cloud + Dev)","Launch recipe app"]},{icon:"\uD83C\uDFE0",title:"Home Buying",items:["$40k deposit saved (cash + super)","Waiting for promotion","Perth market research"]},{icon:"\uD83E\uDD16",title:"AI Stack",items:["Clawdius (Kimi + Antigravity)","5 Telegram groups","Daily briefings at 7am"]}].map((e,t)=>(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-tertiary)",padding:"20px",borderRadius:"var(--radius-md)",border:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("h3",{style:{color:"var(--accent)",fontWeight:600,marginBottom:"12px",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[e.icon," ",e.title]}),(0,a.jsx)("ul",{style:{color:"var(--text-secondary)",lineHeight:1.8,fontSize:"14px"},children:e.items.map((e,t)=>(0,a.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)("span",{style:{color:"var(--accent)",fontSize:"10px"},children:"●"}),e]},t))})]},t))})]})]}),C&&(0,a.jsx)(p,{task:e.find(e=>e.id===C.id)||C,onClose:()=>D(null)})]})}}},function(e){e.O(0,[954,971,117,744],function(){return e(e.s=6175)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6175:function(e,r,t){Promise.resolve().then(t.bind(t,9305))},9305:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var a=t(7437),o=t(2265);let n=(0,t(3053).eI)("https://jfsgojrkphwydazkwuxk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impmc2dvanJrcGh3eWRhemt3dXhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NTk0MjIsImV4cCI6MjA4NjIzNTQyMn0.RUfVvccAJt775XJimfbIGais6yp7PgXVioxM8NP7qks");async function i(e){let{type:r,task_id:t,task_title:a,from_status:o,to_status:i,details:s,created_by:d="robin"}=e,{error:l}=await n.from("activity_logs").insert([{type:r,task_id:t,task_title:a,from_status:o||null,to_status:i||null,details:s||null,created_by:d}]);l&&console.error("Error logging activity:",l)}async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,{data:r,error:t}=await n.from("activity_logs").select("*").order("created_at",{ascending:!1}).limit(e);return t?(console.error("Error fetching activity logs:",t),[]):r||[]}function d(e){let{title:r,status:t,tasks:s,count:d,onTaskAdded:l,onDragStart:c,onDragEnd:p,onDragOver:u,onDrop:x,isDragOver:g,draggedTask:v}=e,[y,b]=(0,o.useState)(!1),[h,m]=(0,o.useState)(""),[f,k]=(0,o.useState)(""),[j,C]=(0,o.useState)("work"),[D,S]=(0,o.useState)("medium"),[w,_]=(0,o.useState)(null),[T,z]=(0,o.useState)(""),[R,I]=(0,o.useState)(""),[E,W]=(0,o.useState)("work"),[M,B]=(0,o.useState)("medium"),[A,L]=(0,o.useState)(""),[F,N]=(0,o.useState)("todo"),[O,P]=(0,o.useState)(!1),[J,H]=(0,o.useState)(""),U=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!w)return;let e=e=>{U.current&&!U.current.contains(e.target)&&K()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[w]);let X=(0,o.useCallback)(e=>{"Escape"===e.key?(e.preventDefault(),K()):"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&w&&(e.preventDefault(),Q(w))},[w,T,R,E,M,A,F]),q=async e=>{if(e.preventDefault(),!h.trim())return;let{data:r,error:a}=await n.from("tasks").insert([{title:h,description:f,status:t,category:j,priority:D,created_by:"robin"}]).select();if(a)console.error("Error adding task:",a);else{let e=null==r?void 0:r[0];await i({type:"task_created",task_id:(null==e?void 0:e.id)||null,task_title:h,to_status:t}),m(""),k(""),b(!1),l()}},G=async(e,r,a)=>{if(a.stopPropagation(),!confirm("Delete this task?"))return;let{error:o}=await n.from("tasks").delete().eq("id",e);o?console.error("Error deleting task:",o):(await i({type:"task_deleted",task_id:e,task_title:r,from_status:t}),l())},V=(e,r)=>{r.stopPropagation(),_(e.id),z(e.title),I(e.description||""),W(e.category),B(e.priority||"medium"),L(e.due_date||""),N(e.status),H("")},K=()=>{_(null),z(""),I(""),W("work"),B("medium"),L(""),N("todo"),P(!1),H("")},Q=async e=>{let r=T.trim();if(!r){H("Task title is required");return}P(!0),H("");let t=s.find(r=>r.id===e),a=null==t?void 0:t.status,{error:o}=await n.from("tasks").update({title:r,description:R,category:E,priority:M,due_date:A||null,status:F,updated_at:new Date().toISOString()}).eq("id",e);o?(console.error("Error updating task:",o),H("Failed to save changes. Please try again."),P(!1)):(a&&a!==F?await i({type:"done"===F?"task_completed":"task_moved",task_id:e,task_title:r,from_status:a,to_status:F}):t&&(t.title!==r||t.description!==R||t.priority!==M||t.category!==E||t.due_date!==(A||null))&&await i({type:"task_updated",task_id:e,task_title:r,details:"Updated task details"}),K(),l())},Y=e=>{switch(e){case"high":return"var(--danger)";case"medium":return"var(--warning)";case"low":return"var(--success)";default:return"var(--text-muted)"}},Z={work:"#58a6ff",project:"#a371f7",career:"#3fb950",finance:"#d29922",personal:"#8b949e"};return(0,a.jsxs)("div",{onDragOver:e=>u(e,t),onDrop:e=>x(e,t),style:{backgroundColor:g?"var(--accent-subtle)":"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"20px",border:"2px solid ".concat(g?"var(--accent)":"var(--border)"),transition:"all 0.2s ease",minHeight:"200px",display:"flex",flexDirection:"column"},children:[(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid var(--border-subtle)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,a.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:(()=>{switch(t){case"todo":default:return"var(--text-secondary)";case"in_progress":return"var(--accent)";case"done":return"var(--success)"}})()}}),(0,a.jsx)("h3",{style:{fontSize:"14px",fontWeight:600,color:"var(--text-primary)",textTransform:"uppercase",letterSpacing:"0.5px"},children:r}),(0,a.jsx)("span",{style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:600,minWidth:"24px",textAlign:"center"},children:d})]})}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1,marginBottom:"16px"},children:[0===s.length&&!y&&(0,a.jsx)("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--text-muted)",fontSize:"14px",border:"2px dashed var(--border)",borderRadius:"var(--radius-md)",backgroundColor:"var(--bg-tertiary)"},children:g?"Drop here":"No tasks"}),s.map(e=>(0,a.jsx)("div",{children:w===e.id?(0,a.jsxs)("div",{ref:U,onKeyDown:X,className:"animate-slide-in",style:{backgroundColor:"var(--bg-tertiary)",padding:"16px",borderRadius:"var(--radius-md)",border:"2px solid var(--accent)",display:"flex",flexDirection:"column",gap:"12px",animation:"slideIn 0.2s ease-out",opacity:O?.7:1,pointerEvents:O?"none":"auto",transition:"opacity 0.2s"},children:[J&&(0,a.jsx)("div",{style:{padding:"8px 12px",backgroundColor:"rgba(248, 81, 73, 0.1)",border:"1px solid var(--danger)",borderRadius:"var(--radius-sm)",color:"var(--danger)",fontSize:"13px",fontWeight:500},children:J}),(0,a.jsx)("input",{type:"text",value:T,onChange:e=>{z(e.target.value),J&&H("")},placeholder:"Task title",style:{width:"100%",padding:"10px 14px",backgroundColor:"var(--bg-secondary)",border:"1px solid ".concat(J&&!T.trim()?"var(--danger)":"var(--border)"),borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",fontWeight:500},autoFocus:!0}),(0,a.jsx)("textarea",{value:R,onChange:e=>I(e.target.value),placeholder:"Description (optional)",rows:2,style:{width:"100%",padding:"10px 14px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",resize:"none",fontFamily:"inherit"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("select",{value:E,onChange:e=>W(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"work",children:"\uD83D\uDCBC Work"}),(0,a.jsx)("option",{value:"project",children:"\uD83D\uDE80 Project"}),(0,a.jsx)("option",{value:"career",children:"\uD83D\uDCC8 Career"}),(0,a.jsx)("option",{value:"finance",children:"\uD83D\uDCB0 Finance"}),(0,a.jsx)("option",{value:"personal",children:"\uD83C\uDFE0 Personal"})]}),(0,a.jsxs)("select",{value:M,onChange:e=>B(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"low",children:"\uD83D\uDFE2 Low"}),(0,a.jsx)("option",{value:"medium",children:"\uD83D\uDFE1 Medium"}),(0,a.jsx)("option",{value:"high",children:"\uD83D\uDD34 High"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("label",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:A,onChange:e=>L(e.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer",colorScheme:"dark"}})]}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"4px"},children:[(0,a.jsx)("label",{style:{fontSize:"11px",fontWeight:600,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Status"}),(0,a.jsxs)("select",{value:F,onChange:e=>N(e.target.value),style:{width:"100%",padding:"10px 12px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"todo",children:"\uD83D\uDCCB To Do"}),(0,a.jsx)("option",{value:"in_progress",children:"\uD83D\uDD04 In Progress"}),(0,a.jsx)("option",{value:"done",children:"✅ Done"})]})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[(0,a.jsxs)("button",{type:"button",onClick:()=>Q(e.id),disabled:O,style:{flex:1,backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",padding:"10px",fontSize:"14px",fontWeight:600,cursor:O?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},onMouseEnter:e=>{O||(e.currentTarget.style.backgroundColor="var(--accent-hover)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--accent)"},children:[O&&(0,a.jsx)("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"#fff",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),O?"Saving...":"Save"]}),(0,a.jsx)("button",{type:"button",onClick:K,disabled:O,style:{flex:1,backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"10px",fontSize:"14px",fontWeight:500,cursor:O?"not-allowed":"pointer",transition:"all 0.2s"},onMouseEnter:e=>{O||(e.currentTarget.style.backgroundColor="var(--bg-tertiary)",e.currentTarget.style.color="var(--text-primary)")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--bg-secondary)",e.currentTarget.style.color="var(--text-secondary)"},children:"Cancel"})]}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"var(--text-muted)",textAlign:"center",marginTop:"-4px"},children:"Esc to cancel \xb7 ⌘/Ctrl+Enter to save"})]}):(0,a.jsxs)("div",{draggable:!0,onDragStart:()=>c(e),onDragEnd:p,className:"task-card animate-slide-in",style:{backgroundColor:"var(--bg-tertiary)",padding:"16px",borderRadius:"var(--radius-md)",border:"1px solid var(--border-subtle)",cursor:"grab",transition:"all 0.2s ease",boxShadow:(null==v?void 0:v.id)===e.id?"var(--shadow-lg)":"var(--shadow-sm)",opacity:(null==v?void 0:v.id)===e.id?.5:1,position:"relative"},children:[(0,a.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"2px",opacity:.3},children:[void 0,void 0,void 0].map((e,r)=>(0,a.jsx)("div",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:"var(--text-muted)"}},r))}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:"#fff",backgroundColor:Z[e.category]||"#6e7681"},children:e.category}),(0,a.jsx)("span",{style:{display:"inline-flex",alignItems:"center",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:Y(e.priority||"medium"),backgroundColor:"".concat(Y(e.priority||"medium"),"20")},children:e.priority||"medium"})]}),(0,a.jsx)("p",{style:{color:"var(--text-primary)",fontSize:"14px",fontWeight:500,lineHeight:1.5,marginBottom:e.description?"8px":"0",paddingRight:"24px"},children:e.title}),e.description&&(0,a.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:1.5,marginBottom:"12px"},children:e.description}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"12px",paddingTop:"12px",borderTop:"1px solid var(--border-subtle)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,a.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"var(--accent-subtle)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",color:"var(--accent)",fontWeight:600},children:"R"}),e.due_date&&(0,a.jsxs)("span",{style:{fontSize:"12px",color:new Date(e.due_date)<new Date?"var(--danger)":"var(--text-muted)"},children:["\uD83D\uDCC5 ",new Date(e.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,a.jsx)("button",{onClick:r=>V(e,r),style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--text-muted)",transition:"all 0.2s",fontSize:"14px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--accent)",e.currentTarget.style.backgroundColor="var(--accent-subtle)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:"✏️"}),(0,a.jsx)("button",{onClick:r=>G(e.id,e.title,r),style:{padding:"6px",backgroundColor:"transparent",border:"none",borderRadius:"var(--radius-sm)",cursor:"pointer",color:"var(--text-muted)",transition:"all 0.2s",fontSize:"14px"},onMouseEnter:e=>{e.currentTarget.style.color="var(--danger)",e.currentTarget.style.backgroundColor="var(--danger-subtle)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:"\uD83D\uDDD1️"})]})]})]})},e.id))]}),"done"!==t&&(0,a.jsx)(a.Fragment,{children:y?(0,a.jsxs)("form",{onSubmit:q,style:{display:"flex",flexDirection:"column",gap:"12px",animation:"slideIn 0.2s ease-out"},children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"What needs to be done?",style:{width:"100%",padding:"12px 16px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",transition:"border-color 0.2s"},autoFocus:!0}),(0,a.jsx)("textarea",{value:f,onChange:e=>k(e.target.value),placeholder:"Add details (optional)...",rows:2,style:{width:"100%",padding:"12px 16px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",resize:"none",fontFamily:"inherit"}}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,a.jsxs)("select",{value:j,onChange:e=>C(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"work",children:"\uD83D\uDCBC Work"}),(0,a.jsx)("option",{value:"project",children:"\uD83D\uDE80 Project"}),(0,a.jsx)("option",{value:"career",children:"\uD83D\uDCC8 Career"}),(0,a.jsx)("option",{value:"finance",children:"\uD83D\uDCB0 Finance"}),(0,a.jsx)("option",{value:"personal",children:"\uD83C\uDFE0 Personal"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>S(e.target.value),style:{flex:1,padding:"10px 12px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"13px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"low",children:"\uD83D\uDFE2 Low"}),(0,a.jsx)("option",{value:"medium",children:"\uD83D\uDFE1 Medium"}),(0,a.jsx)("option",{value:"high",children:"\uD83D\uDD34 High"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"4px"},children:[(0,a.jsx)("button",{type:"submit",style:{flex:1,backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",padding:"12px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--accent-hover)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--accent)"},children:"Add Task"}),(0,a.jsx)("button",{type:"button",onClick:()=>{b(!1),m(""),k("")},style:{flex:1,backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"12px",fontSize:"14px",fontWeight:500,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-secondary)",e.currentTarget.style.color="var(--text-primary)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--bg-tertiary)",e.currentTarget.style.color="var(--text-secondary)"},children:"Cancel"})]})]}):(0,a.jsxs)("button",{onClick:()=>b(!0),style:{width:"100%",border:"2px dashed var(--border)",borderRadius:"var(--radius-md)",padding:"14px",color:"var(--text-muted)",backgroundColor:"transparent",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--accent)",e.currentTarget.style.color="var(--accent)",e.currentTarget.style.backgroundColor="var(--accent-subtle)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border)",e.currentTarget.style.color="var(--text-muted)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("span",{style:{fontSize:"18px"},children:"+"}),"Add a task"]})})]})}function l(){let e=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("header",{style:{backgroundColor:"var(--bg-secondary)",borderBottom:"1px solid var(--border)",padding:"32px 16px"},children:(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"12px"},children:[(0,a.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"var(--radius-lg)",backgroundColor:"var(--accent-subtle)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{style:{fontSize:"clamp(24px, 5vw, 32px)",fontWeight:700,background:"linear-gradient(135deg, var(--accent), #a371f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"-0.5px"},children:"Robin's Mission Control"})})]}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:"15px",marginBottom:"8px"},children:"Track tasks, projects, and daily activities"}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"13px",fontWeight:500},children:e})]})})}function c(){let[e,r]=(0,o.useState)([]),[t,c]=(0,o.useState)(!0),[p,u]=(0,o.useState)("tasks"),[x,g]=(0,o.useState)(null),[v,y]=(0,o.useState)(null),[b,h]=(0,o.useState)("all"),[m,f]=(0,o.useState)(""),[k,j]=(0,o.useState)(""),[C,D]=(0,o.useState)(!1),[S,w]=(0,o.useState)(null),[_,T]=(0,o.useState)([]),[z,R]=(0,o.useState)(!1);(0,o.useEffect)(()=>{I(),E();let e=n.channel("tasks").on("postgres_changes",{event:"*",schema:"public",table:"tasks"},I).subscribe(),r=n.channel("activity_logs").on("postgres_changes",{event:"*",schema:"public",table:"activity_logs"},()=>{"activity"===p&&W()}).subscribe();return()=>{e.unsubscribe(),r.unsubscribe()}},[p]);let I=async()=>{let{data:e,error:t}=await n.from("tasks").select("*").order("created_at",{ascending:!1});t?console.error("Error fetching tasks:",t):r(e||[]),c(!1)},E=async()=>{let{data:e,error:r}=await n.from("notes").select("*").order("updated_at",{ascending:!1}).limit(1).single();r&&"PGRST116"!==r.code?console.error("Error fetching notes:",r):e&&(j(e.content||""),w(new Date(e.updated_at)))},W=async()=>{R(!0),T(await s(50)),R(!1)};(0,o.useEffect)(()=>{"activity"===p&&W()},[p]);let M=async()=>{D(!0);let{error:e}=await n.from("notes").upsert({content:k,updated_by:"clawdius",updated_at:new Date().toISOString()});e?console.error("Error saving notes:",e):w(new Date),D(!1)},B=(0,o.useCallback)(e=>{g(e)},[]),A=(0,o.useCallback)(()=>{g(null),y(null)},[]),L=(0,o.useCallback)((e,r)=>{e.preventDefault(),y(r)},[]),F=(0,o.useCallback)(async(e,r)=>{if(e.preventDefault(),y(null),!x||x.status===r){g(null);return}let t=x.status,{error:a}=await n.from("tasks").update({status:r,updated_at:new Date().toISOString()}).eq("id",x.id);a?console.error("Error moving task:",a):(await i({type:"done"===r?"task_completed":"task_moved",task_id:x.id,task_title:x.title,from_status:t,to_status:r}),I()),g(null)},[x]),N=e.filter(e=>{let r="all"===b||e.category===b,t=e.title.toLowerCase().includes(m.toLowerCase());return r&&t}),O=N.filter(e=>"todo"===e.status),P=N.filter(e=>"in_progress"===e.status),J=N.filter(e=>"done"===e.status);if(t)return(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-primary)"},children:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Loading..."})]})});let H=e=>({padding:"10px 20px",borderRadius:"var(--radius-md)",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:500,transition:"all 0.2s ease",backgroundColor:e?"var(--accent)":"transparent",color:e?"#fff":"var(--text-secondary)"});return(0,a.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"var(--bg-primary)"},children:[(0,a.jsx)(l,{}),(0,a.jsxs)("main",{style:{maxWidth:"1400px",margin:"0 auto",padding:"24px 16px"},children:[(0,a.jsx)("nav",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap",padding:"4px",backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",width:"fit-content"},children:[{id:"tasks",label:"\uD83D\uDCCB Tasks"},{id:"activity",label:"\uD83D\uDCCA Activity"},{id:"memory",label:"\uD83E\uDDE0 Memory"},{id:"notes",label:"\uD83D\uDCDD Notes"}].map(e=>(0,a.jsx)("button",{onClick:()=>u(e.id),style:H(p===e.id),children:e.label},e.id))}),"tasks"===p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",marginBottom:"24px",flexWrap:"wrap",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{position:"relative",flex:"1 1 200px",maxWidth:"300px"},children:[(0,a.jsx)("input",{type:"text",placeholder:"Search tasks...",value:m,onChange:e=>f(e.target.value),style:{width:"100%",padding:"10px 16px 10px 40px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px"}}),(0,a.jsx)("span",{style:{position:"absolute",left:"14px",top:"50%",transform:"translateY(-50%)",color:"var(--text-muted)"},children:"\uD83D\uDD0D"})]}),(0,a.jsxs)("select",{value:b,onChange:e=>h(e.target.value),style:{padding:"10px 16px",backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),(0,a.jsx)("option",{value:"work",children:"Work"}),(0,a.jsx)("option",{value:"project",children:"Project"}),(0,a.jsx)("option",{value:"career",children:"Career"}),(0,a.jsx)("option",{value:"finance",children:"Finance"}),(0,a.jsx)("option",{value:"personal",children:"Personal"})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"24px",alignItems:"start"},children:[(0,a.jsx)(d,{title:"To Do",status:"todo",tasks:O,count:O.length,onTaskAdded:I,onDragStart:B,onDragEnd:A,onDragOver:L,onDrop:F,isDragOver:"todo"===v,draggedTask:x}),(0,a.jsx)(d,{title:"In Progress",status:"in_progress",tasks:P,count:P.length,onTaskAdded:I,onDragStart:B,onDragEnd:A,onDragOver:L,onDrop:F,isDragOver:"in_progress"===v,draggedTask:x}),(0,a.jsx)(d,{title:"Done",status:"done",tasks:J,count:J.length,onTaskAdded:I,onDragStart:B,onDragEnd:A,onDragOver:L,onDrop:F,isDragOver:"done"===v,draggedTask:x})]})]}),"notes"===p&&(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Quick Notes"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[C&&(0,a.jsx)("span",{style:{color:"var(--text-muted)",fontSize:"13px"},children:"Saving..."}),S&&!C&&(0,a.jsxs)("span",{style:{color:"var(--text-muted)",fontSize:"13px"},children:["Saved ",S.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),(0,a.jsx)("button",{onClick:M,disabled:C,style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"#fff",border:"none",borderRadius:"var(--radius-md)",fontSize:"14px",fontWeight:500,cursor:C?"not-allowed":"pointer",opacity:C?.7:1},children:"Save"})]})]}),(0,a.jsx)("textarea",{value:k,onChange:e=>j(e.target.value),onBlur:M,placeholder:"Type your notes here...",style:{width:"100%",minHeight:"400px",backgroundColor:"var(--bg-tertiary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",padding:"16px",color:"var(--text-primary)",resize:"vertical",fontSize:"14px",lineHeight:1.6,fontFamily:"inherit"}}),(0,a.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"13px",marginTop:"12px",fontStyle:"italic"},children:"Notes are saved automatically when you click away or hit the Save button"})]}),"activity"===p&&(0,a.jsxs)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"12px",borderBottom:"1px solid var(--border-subtle)"},children:[(0,a.jsx)("h2",{style:{fontSize:"20px",fontWeight:600,color:"var(--text-primary)",margin:0},children:"Recent Activity"}),(0,a.jsx)("button",{onClick:W,disabled:z,style:{padding:"8px 16px",backgroundColor:"var(--bg-tertiary)",color:"var(--text-secondary)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"13px",fontWeight:500,cursor:z?"not-allowed":"pointer",opacity:z?.7:1,transition:"all 0.2s"},children:z?"Loading...":"Refresh"})]}),z&&0===_.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:[(0,a.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid var(--bg-tertiary)",borderTopColor:"var(--accent)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 12px"}}),"Loading activity..."]}):0===_.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)",fontSize:"14px"},children:[(0,a.jsx)("p",{style:{fontSize:"32px",marginBottom:"12px"},children:"\uD83D\uDCCA"}),(0,a.jsx)("p",{children:"No activity yet. Create, move, or delete tasks to see activity here."})]}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:_.map(e=>{let r=()=>{switch(e.type){case"task_created":return"var(--accent)";case"task_moved":return"var(--warning)";case"task_completed":return"var(--success)";case"task_deleted":return"var(--danger)";case"task_updated":return"var(--text-secondary)";default:return"var(--text-muted)"}},t=e=>{switch(e){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return e}};return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px",padding:"12px 8px",borderRadius:"var(--radius-md)",transition:"background-color 0.15s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--bg-tertiary)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"".concat(r(),"15"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",flexShrink:0,marginTop:"2px"},children:(()=>{switch(e.type){case"task_created":return"✨";case"task_moved":return"➡️";case"task_completed":return"✅";case"task_deleted":return"\uD83D\uDDD1️";case"task_updated":return"✏️";default:return"\uD83D\uDCCC"}})()}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{fontSize:"12px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.3px",color:r(),padding:"2px 8px",borderRadius:"10px",backgroundColor:"".concat(r(),"15")},children:(()=>{switch(e.type){case"task_created":return"Created";case"task_moved":return"Moved";case"task_completed":return"Completed";case"task_deleted":return"Deleted";case"task_updated":return"Updated";default:return e.type}})()}),(0,a.jsx)("span",{style:{fontSize:"14px",fontWeight:500,color:"var(--text-primary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.task_title})]}),e.from_status&&e.to_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:t(e.from_status)}),(0,a.jsx)("span",{children:"→"}),(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:t(e.to_status)})]}),"task_created"===e.type&&e.to_status&&!e.from_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px"},children:["Added to"," ",(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:t(e.to_status)})]}),"task_deleted"===e.type&&e.from_status&&(0,a.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px"},children:["Removed from"," ",(0,a.jsx)("span",{style:{padding:"1px 6px",borderRadius:"4px",backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},children:t(e.from_status)})]}),e.details&&(0,a.jsx)("div",{style:{fontSize:"13px",color:"var(--text-muted)",marginTop:"4px",fontStyle:"italic"},children:e.details})]}),(0,a.jsx)("div",{style:{fontSize:"12px",color:"var(--text-muted)",whiteSpace:"nowrap",flexShrink:0,marginTop:"2px"},title:new Date(e.created_at).toLocaleString(),children:(e=>{let r=new Date,t=new Date(e),a=Math.floor((r.getTime()-t.getTime())/1e3);if(a<60)return"just now";let o=Math.floor(a/60);if(o<60)return"".concat(o,"m ago");let n=Math.floor(o/60);if(n<24)return"".concat(n,"h ago");let i=Math.floor(n/24);return i<7?"".concat(i,"d ago"):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})})(e.created_at)})]},e.id)})})]}),"memory"===p&&(0,a.jsx)("div",{style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",padding:"24px",border:"1px solid var(--border)",textAlign:"center",color:"var(--text-muted)"},children:(0,a.jsx)("p",{children:"Coming soon..."})})]})]})}}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=6175)}),_N_E=e.O()}]);